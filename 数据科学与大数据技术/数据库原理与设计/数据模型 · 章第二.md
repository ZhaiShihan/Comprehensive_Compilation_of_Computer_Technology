### 壹  数据模型

#### 述：
#####
#####

###### · 概念模型：
· 概念模型用于信息世界的建模，是现实世界到机器世界的一个中间层次
· 概念模型是数据库设计的有力工具，是数据库设计人员和用户之间进行交流的语言
· 基本要求：具有较强语义表达能力，能够方便、直接地表达应用中的各种语义知识；简单清晰，易于用户理解

###### · 实体（Entity）：
· 实体是客观存在并可相互区别的事物
· 实体可以是具体的对象，如一个学生、一本书、一辆汽车，也可以是抽象的概念或联系，如一堂课、一次比赛

###### · 属性（Attribute）：
· 实体具有的某一特征称为属性
· 一个实体可以由若干个属性来刻画，如学生实体有“学号”、“姓名”、“院系”、“年龄”等方面的属性
· 属性有“类型”和“值”两个概念：
	“类型”即为属性名，如学生的“姓名”、“年龄”是属性的类型，“值”即为属性的具体内容

###### · 联系（Relationship）：
· 在现实世界中，事物内部以及事物之间是有联系的
· 在信息世界中将被抽象为实体内部的联系和实体之间的联系
· **实体内部的联系**通常指组成实体的各属性之间的联系
· **实体之间的联系**通常指不同实体集之间的联系
· 两个实体集之间的联系有三种：1:1 联系，1:n 联系，m:n 联系（一对一、一对多、多对多）
1. <font color="#ffc000">一对一联系</font>（1:1）：
	· 实体集 A 中的一个实体至多与实体集 B 中的一个实体相对应，反之亦然
	· 例：班级与班长之间的联系：一个班级只有一个班长，一个班长只在一个班中任职
2. <font color="#ffc000">一对多联系</font>（1:n）：
	· 实体集 A 中的一个实体与实体集 B 中的多个实体相对应，反之，实体集 B 中的一个实体至多与实体集 A 中的一个实体相对应
	· 例：班级与学生之间的联系：一个班级中有若干名学生，每个学生只在一个班级中学习
3. <font color="#ffc000">多对多联系</font>（m:n）：
	· 实体集 A 中的一个实体与实体集 B 中的多个实体相对应，反之，实体集 B 中的一个实体与实体集 A 中的多个实体相对应
	· 例：课程与学生之间的联系：一门课程有若干个学生选修，一个学生可选修若干门课程
· 多个实体集之间也可以存在有联系，称为**多元联系**：
	· 例：一个供应商可供应多种零件给多个工程，一个工程可由多个供应商供应多种零件，一种零件可由多个供应商供应给多个工程，供应商、零件和工程之间存在着多对多的联系，表示为：m:n:p
· **实体集内部不同实体之间的联系**：
1. 一对多关系：
	1. 职工实体集内部具有领导与被领导的联系
	2. 某一职工（干部）“领导”若干名职工
	3. 一个职工仅被另外一个职工直接领导
2. 同一实体集内一对一关系
3. 同一实体集内一对多关系

###### · E-R 模型：
· 概念模型的表示方法很多，最著名的是 E-R 模型
· **实体-联系模型（Entity-Relationship Approach）**：用 E-R 图来描述现实世界的概念模型, E-R 模型也称为 E-R 方法
· E-R 图的三个基本成分：<font color="#00b0f0">实体</font>、<font color="#00b0f0">属性</font>和<font color="#00b0f0">联系的方法</font>：
1. 实体：用矩形表示，矩形框内写明实体名
2. 属性：用椭圆形表示，并用无向边将其与相应的实体连接起来
3. 实体之间的联系用菱形框表示，菱形框内标明联系名，并分别用连线将关联的实体连接起来，在连线旁标明实体间联系的类型
![[数据库原理与设计图/数据库原理与设计图2-1.png|400]]
                            （图一：学生与课程之间的 E-R 图）
![[数据库原理与设计图/数据库原理与设计图2-2.png|500]]
                            （ 图二：E-R 图的绘制要求）
· E-R 模型中实体间的联系提供了较多的语义：
1. 基数比约束：如在二元联系中有 1:1，1:n，m:n 的联系
2. 参与约束：根据实体集中的实体是否全部参与联系来描述实体参与联系的约束
	· 一个实体集中的所有实体都参与联系称为*完全参与*，否则，称为*部分参与*
	· 如在教师与课程联系中，一门课至少要有一位教师讲授；而有教师不担任授课任务，则在这一联系中，课程实体为完全参与，教师实体为部分参与
3. 实体的参与度：实体参与联系的最小和最大次数，称实体的*参与度*
	例：如果规定一个学生最少选修 2 门课，最多选修 5 门课，则学生在选课联系中的参与度是 (2，5)
	例：规定一门课至少要有 10 个学生选修，至多有 60 个，则课程在选课联系中的参与度是 (10，60)
4. 弱实体：E-R 模型中有一类特殊的实体，这种实体的存在是依赖于其他实体而存在的，称这类实体为*弱实体*；相对于弱实体，它所依赖的实体称为强实体
	· 弱实体在 E-R 模型中用双框矩形表示，为了表示全部参与，与菱形框间用双线连接
	· 弱实体不能脱离强实体而独立存在
![[数据库原理与设计图/数据库原理与设计图2-3.png|400]]
                        （图三：弱实体“家长”对于强实体“学生”的依赖）
5. 子类实体：在扩展 E-R 数据模型中增加了子类和超类的概念，使 E-R 数据模型具有了更多的语义
	· 在基本 E-R 模型中，一个实体集是具有共同特性的一类实体的集合，但有时需要将实体集根据个体的不同特性分为多个子集
![[数据库原理与设计图/数据库原理与设计图2-4.png|500]]
               （图四：超类“职工”和子类“教师”、“实验员”、“机关工作人员”之间的关系）
· E-R 模型被广泛地应用于数据库概念模型的设计：
	1. 在 E-R 图中仅表示现实世界中的信息结构及信息之间的关系，不涉及任何信息在计算机中的表示
	2. 只要用户的需求不变，E-R 模型是稳定的
	3. 运用 E-R 模型，可以很方便地将其转换为具体的 DBMS 所支持的数据模型

###### · 层次模型：
· 层次模型是数据库系统中最早出现的数据模型，典型代表是 IBM 公司的 IMS（Information Management System）数据库管理系统，1968 年推出
· 层次数据模型用树型结构表示各类实体以及实体间的联系：现实世界中，许多实体之间的联系都表现出一种很自然的层次关系，如家族关系，行政机构等
· 满足下面两个条件的基本层次联系的集合为层次模型：
	1. 有且只有一个结点没有双亲结点，这个结点称为根节点
	2. 根以外的其它结点有且只有一个双亲结点
· 在层次模型中，*根结点*处在最上层，其它结点都有上一级结点作为其双亲结点，这些结点称为其双亲结点的*子女结点*，同一双亲结点的子女结点称为*兄弟结点*，没有子女的结点称为*叶结点*
· 双亲结点到子女结点间表示了记录间的一对多的关系
![[数据库原理与设计图/数据库原理与设计图2-5.png|300]]
                                （图五：层次模型的实例）
1. 层次模型的优点：
	1. 数据结构比较简单，清晰
	2. 层次数据库的查询效率高
	3. 提供良好的数据完整性支持
2. 层次模型的缺点：
	1. 不能直接表示两个以上的实体型间的复杂的联系和实体型间的多对多联系，只能通过引入冗余数据或创建虚拟结点的方法来解决，易产生不一致性
	2. 对数据的插入和删除的操作限制太多
	3. 查询子女结点必须通过双亲结点
	4. 由于结构严密，层次命令趋于程序化

###### · 网状模型：
· 现实世界中事物之间的联系更多的是非层次关系的，用层次模型表示这种关系很不直观，网状模型克服了这一弊病，可以清晰的表示这种非层次关系
![[数据库原理与设计图/数据库原理与设计图2-6.png|300]]
                                （图六：网络模型的实例）
· 满足下面两个条件的基本层次联系的集合为网状模型：
	1. 允许一个以上的结点无双亲
	2. 一个结点可以有多于一个的双亲
1. 网状模型的优点：
	1. 能够更为直接地描述现实世界，如一个结点可以有多个双亲
	2. 具有良好的性能，存取效率较高
2. 网状模型的缺点：
	1. 结构比较复杂，而且随着应用环境的扩大，数据库的结构就变的越来越复杂，不利于最终用户掌握
	2. 其 DDL（数据定义语言）、DML（数据操纵语言） 语言复杂，用户不容易使用；访问数据时必须自行选择存取路径，增加了程序编写的负担
· 两个或两个以上的结点都可以有多个双亲结点，则此时有向树变成了有向图
· 网状模型可以更直接的描述现实世界，层次模型实际上是网状模型的特例

###### · 关系数据模型：
· 在关系模型中，基本数据结构被限制为二维表，一张二维表称为一个**关系**
1. **关系**：
· 关系是数学上集合论中的一个概念，关系模型是以关系为基础发展起来的
	1. 关系（relation）：关系是一张二维表，是由多个行和列组成的，一个关系可用来描述一个实体集
![[数据库原理与设计图/数据库原理与设计图2-7.png|500]]
                                  （图七：关系的二维表）
    2. 属性（attribute）：一个关系有多个列，每一列为关系的一个属性
	    · 如学生关系中，有属性名学号、姓名、出生年月
	3. 域（domain）：一个属性对应一个值的集合。域是属性的取值范围
		· 如学号的域是 7 位字符数字的集合，学生姓名是汉字字符串的集合等
	4. 元组（tuple）：关系是元组的集合，一个元组对应实体集中的一个个体
		· 一个元组由若干个分量组成，一个分量对应一个属性值
![[数据库原理与设计图/数据库原理与设计图2-8.png|500]]
                                  （图八：元组的结构）
	5. 键（key）：键是一个或多个属性组成的，能够唯一标识一个元组
		· 例：对于学生表：
			1. 一个学号可以唯一标识一个学生，可以作为一个键（超键）
			2. 一个学号加一个姓名可以唯一标识一个学生，可以作为一个键
			3. 一个学号加一个姓名，加一个性别，可以唯一标识一个学生，可以作为一个键
		· 一个关系中可能有多组属性都能够起到标识元组的作用，因而一个关系中可能有多个键
		· 选择其中的一个作为**主键**，其余为**候选键**（键是固定的，但主键不是唯一的）
		· *主键和候选键中的属性没有冗余*：如（学号，姓名）中，学号可以单独唯一确定一个学生，所以这里姓名这一属性就是冗余项，它不能成为主键与候选键
2. **关系模式**：
· 对关系结构的描述称为关系模式（relation schema）
· 关系模式可用如下形式表示：
	· 关系名（属性名 1，属性名 2，……，属性名 n ）
	· 如学生关系可以表示为：学生（学号，姓名，出生年月，性别，入学年份，班级）
· **关系数据库模式**是一组关系模式的集合，这组关系模式对应的关系的集合称为关系数据库
· 关系模型中基本的数据结构是<font color="#ffc000">单一的关系</font>
· 现实世界中实体及实体间的联系都用关系表示
· E-R 模式中联系是单独表述的，而在关系模式中，联系也可以用*表*表示，例如：选课联系=>选课表
![[数据库原理与设计图/数据库原理与设计图2-9.png|400]]
                                  （图九：学生选课表）
· 表中有来自学生和课程两个实体的属性，而成绩是选课关联自身的描述属性

· 关系必须是规范化的，满足一定的*规范条件*
· 最基本的规范条件：关系的每一个分量必须是一个不可分的数据项

· **关系模型的数据完整性约束**：
	· 为了维护数据库中的数据与现实世界的一致性，需要对数据施加一定的约束条件：
		<font color="#00ffb0">实体完整性、参照完整性、用户自定义完整性</font>
· **关系模型的数据操纵**：
	· 关系模型中，对关系中的数据可进行查询、插入、删除和修改操作
	· 在关系数据库系统中，对数据的全部操作都可以归结为对关系的运算：
		· 对关系可以进行多种运算
		· 运算结果形成一个新的关系
		· 关系运算分为：关系代数和关系演算
· **概念模式与逻辑模式的对应**：
![[数据库原理与设计图/数据库原理与设计图2-10.png|650]]
                           （图十：概念模式与逻辑模式的对应）

· 关系模型的优点：
1. 数据结构简单
2. 一体化的数据子语言
3. 数据独立性高
4. 面向集合的存取方式
5. 坚实的理论基础
6. 有利于开展其他应用

###### · 面向对象数据模型：
· 对象关系数据库系统（Object Relational Database System，ORDBS）是面向对象数据模型（Object Oriented Data Model，简称*OO 模型*）和关系数据模型相结合的产物
· 两条研究路线：
	· 建立新的面向对象数据库系统 OODBS，支持 OO 数据模型
	· 以关系数据库和 SQL 为基础，把面向对象技术融入数据库系统的 ORDBS
· *OO 模型的核心概念*：
1. 对象：
	· 定义：对象是由一组数据结构和在这组数据结构上的操作的程序代码封装起来的基本单位
	· 组成部分：
		1. 属性（Attribute）集合：属性描述对象的状态、组成和特性
		2. 方法（Method）集合：描述了对象的行为特性
2. 对象标识 OID（Object IDentifier）：
	· 概念：面向对象数据库中的每个对象都有一个唯一的不变的标识称为对象标识（OID）
	· 特点：永久持久性；独立于值的、系统全局唯一的
3. 封装（Encapsulation）：
	· 每一个对象都是其<font color="#00b0f0">状态与行为</font>的封装
	· 封装是对象的外部界面与内部实现之间实行清晰隔离的一种抽象，外部与对象的通信只能通过<font color="#00b0f0">消息</font>
	· 对象封装之后查询属性值必须通过<font color="#00b0f0">调用方法</font>
4. 类（Class）：
	· 对象类（简称类）：共享同样属性和方法集的所有对象构成了一个对象类
	· 例：一个对象是某一类的一个实例（instance）
	· 在 OODB 类型中，类是“型”，对象是某一类的一个值
![[数据库原理与设计图/数据库原理与设计图2-11.png|400]]
                                （图十一：类层次的实例）
· 教员、行政人员、工人中只有本身的特殊属性和方法；同时它们又继承教职员工类和人的所有属性和方法；逻辑上它们具有人、教职员工和本身的所有属性和方法

· 关系模型与 OO 模型的比较：

| 内容     | 关系数据模型     | 面向对象数据模型  |
| ------ | ---------- | --------- |
| 基本数据结构 | 二维表        | 类         |
| 数据标识符  | 码          | OID（对象标识） |
| 静态性质   | 属性         | 属性        |
| 动态行为   | 关系操作       | 方法        |
| 抽象数据类型 | 无          | 有         |
| 封装性    | 无          | 有         |
| 数据间关系  | 主外码联系，数据依赖 | 继承、组合     |
| 模式演化能力 | 弱          | 强         |

· 面向数据库研究存在的问题：
1. 缺乏通用数据模型
2. 缺乏理论基础
3. 缺乏友好的用户界面与工具环境
4. 缺乏有力的查询优化
5. 商业上没有建立坚实的基础

